<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Register</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script
      language="javascript"
      async="true"
      type="text/javascript"
      src="https://whatfix.com/825f85f0-64e8-11ea-81e9-bacbbe07b880/embed/embed.nocache.js"
    ></script>
    <script>
      (function () {
        (a = document.createElement("script")),
          (m = document.getElementsByTagName("script")[0]),
          (a.async = 0),
          (a.src = "https://d1-tracker.factoreal.info/ftreal.min.js"),
          (a.onload = function () {
            ftreal.init("b51e8a40-9b96-11ec-b973-45bb8ceae4ec", true);
          }),
          m.parentNode.insertBefore(a, m);
      })();
    </script>
    <!-- start webpush tracking code -->
    <script type="text/javascript">
      var _at = {};
      window._at.track =
        window._at.track ||
        function () {
          (window._at.track.q = window._at.track.q || []).push(arguments);
        };
      _at.domain = "trackingsiteone.factoreal.info/";
      _at.owner = "2971dd865798";
      _at.idSite = "25284";
      _at.attributes = {};
      _at.webpushid = "web.2.aimtell.com";
      (function () {
        var u = "//s3.amazonaws.com/cdn.aimtell.com/trackpush/";
        var d = document,
          g = d.createElement("script"),
          s = d.getElementsByTagName("script")[0];
        g.type = "text/javascript";
        g.async = true;
        g.defer = true;
        g.src = u + "trackpush.min.js";
        s.parentNode.insertBefore(g, s);
      })();
    </script>
    <!-- end webpush tracking code -->
  </head>
  <body>
    <h1>Login Page</h1>
    <form id="register-form" action="/login.html">
      <label for="name">First name:</label><br />
      <input type="text" id="name" name="name" value="" /><br />
      <label for="email">Email:</label><br />
      <input id="email" type="email" id="email" name="email" value="" /><br />
      <label for="email">Password:</label><br />
      <input type="text" id="email" name="email" value="" /><br /><br />
      <input type="submit" value="Submit" />
    </form>
    <a href="./order.html">Order</a>
    <a href="./product.html">Product</a>
    <a href="./login.html">Welcome</a>
    <script>
      document
        .querySelector('#register-form [type="submit"]')
        .addEventListener("click", async function (e) {
          e.preventDefault();

          try {
            var email = document.querySelector("#email").value;
            var firstName = document.querySelector("#name").value;
            // ftreal.identify(email, {});

            let webSubId = await _aimtellGetSubscriberID()
              .then(function (id) {
                return id;
              })
              .catch((e) => {
                return -1;
              });

            await fetch("https://prime.factoreal.info/api/v1/webuserdata", {
              method: "POST",
              body: JSON.stringify({
                websiteid: "25284",
                authkey:
                  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbnRlcnByaXNlX2lkIjoyNTIsImlhdCI6MTY2NjI0NTk0N30.9KPYwm8URiC1_wPZuKvYhJFSLSmLqjV16fYuA3Q52Ro",
                web_subs_id: webSubId,
                email: email,
                firstname: firstName,
                push_flag: true,
              }),
              headers: {
                "Content-type": "application/json",
              },
            })
              .then((response) => response.json())
              .then((json) => console.log(json));
          } catch (e) {
            console.log(e);
          }
          window.location.href =
            "https://trackingsiteone.factoreal.info/login.html";
        });
    </script>
  </body>
</html>
